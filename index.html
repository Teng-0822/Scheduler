<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Assistant Scheduler - Client Management</title>
    <style>
        :root{--primary-color:#4a90e2;--primary-dark:#357abd;--background-gradient-start:#667eea;--background-gradient-end:#764ba2;--text-color:#333;--text-light:#666;--border-color:#e9ecef;--bg-light:#f8f9fa;--success-color:#27ae60;--warning-color:#f39c12;--danger-color:#e74c3c}*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,sans-serif;background:linear-gradient(135deg,var(--background-gradient-start),var(--background-gradient-end));min-height:100vh;padding:10px;color:var(--text-color)}.container{max-width:1400px;margin:0 auto;background:#fff;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.3);overflow:hidden}header{background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:#fff;padding:20px}.header-content{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.header-left{flex:1;min-width:200px}header h1{font-size:clamp(1.5rem,4vw,2.5rem);margin-bottom:5px;text-shadow:2px 2px 4px rgba(0,0,0,.2)}header p{font-size:clamp(.85rem,2vw,1rem);opacity:.9}.header-right{display:flex;align-items:center;gap:15px;flex-wrap:wrap}.profile-section{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,.2);padding:8px 15px;border-radius:50px;cursor:pointer;transition:.3s}.profile-section:hover{background:rgba(255,255,255,.3)}.profile-avatar{width:40px;height:40px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5em;font-weight:700;color:var(--primary-color)}.profile-name{font-weight:600;font-size:.95em}.settings-btn{width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,.2);border:none;color:#fff;font-size:1.3em;cursor:pointer;transition:.3s;display:flex;align-items:center;justify-content:center}.settings-btn:hover{background:rgba(255,255,255,.3);transform:rotate(90deg)}.tabs{display:flex;background:var(--bg-light);border-bottom:2px solid var(--border-color);overflow-x:auto}.tab-btn{flex:1;min-width:120px;padding:15px 20px;background:none;border:none;font-size:clamp(.9rem,2vw,1.1rem);font-weight:600;color:var(--text-light);cursor:pointer;transition:.3s;border-bottom:3px solid transparent;white-space:nowrap}.tab-btn:hover{background:#e9ecef;color:var(--primary-color)}.tab-btn.active{color:var(--primary-color);border-bottom-color:var(--primary-color);background:#fff}.tab-content{display:none;padding:15px;animation:fadeIn .3s}.tab-content.active{display:block}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.calendar-controls{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:15px}.calendar-header{display:flex;align-items:center;gap:10px;flex-wrap:wrap}.calendar-header h2{font-size:clamp(1.3rem,3vw,1.8rem);color:var(--primary-color)}.client-filter{display:flex;align-items:center;gap:10px;flex-wrap:wrap}.client-filter select{padding:10px 15px;border:2px solid var(--border-color);border-radius:8px;font-size:clamp(.85rem,2vw,.95rem);background:#fff;cursor:pointer;min-width:150px}.calendar-nav{display:flex;gap:8px;flex-wrap:wrap}.nav-btn{padding:10px 15px;background:var(--primary-color);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:clamp(.85rem,2vw,1rem);transition:.3s;font-weight:600;white-space:nowrap}.nav-btn:hover{background:var(--primary-dark);transform:translateY(-2px);box-shadow:0 4px 12px rgba(74,144,226,.4)}.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-bottom:20px}.calendar-day-header{text-align:center;font-weight:700;padding:10px 5px;background:var(--bg-light);border-radius:8px;color:var(--text-light);font-size:clamp(.75rem,1.5vw,.95rem)}.calendar-day{aspect-ratio:1;border:2px solid var(--border-color);border-radius:12px;padding:8px 5px;cursor:pointer;transition:.3s;background:#fff;position:relative;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;min-height:60px}.calendar-day:hover{border-color:var(--primary-color);transform:translateY(-4px);box-shadow:0 6px 20px rgba(74,144,226,.3)}.calendar-day.other-month{opacity:.3;background:var(--bg-light)}.calendar-day.today{background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:#fff;font-weight:700;border-color:var(--primary-dark)}.calendar-day.has-tasks::after{content:'';position:absolute;bottom:6px;width:6px;height:6px;background:var(--danger-color);border-radius:50%}.calendar-day.today.has-tasks::after{background:#fff}.day-number{font-size:clamp(1rem,2vw,1.2rem);font-weight:600;margin-bottom:3px}.day-task-count{font-size:clamp(.65rem,1.5vw,.75rem);opacity:.8}.task-preview{position:absolute;bottom:100%;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.9);color:#fff;padding:10px;border-radius:8px;font-size:.75rem;white-space:nowrap;z-index:100;margin-bottom:8px;display:none;max-width:200px;text-align:left}.calendar-day:hover .task-preview{display:block}.task-preview::after{content:'';position:absolute;top:100%;left:50%;transform:translateX(-50%);border:6px solid transparent;border-top-color:rgba(0,0,0,.9)}.task-preview-item{margin-bottom:5px;padding-bottom:5px;border-bottom:1px solid rgba(255,255,255,.2)}.task-preview-item:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:1000;animation:fadeIn .3s;overflow-y:auto;padding:20px}.modal.active{display:flex;justify-content:center;align-items:flex-start}.modal-content{background:#fff;padding:25px;border-radius:20px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.3);animation:slideUp .3s;margin:20px auto}@keyframes slideUp{from{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:2px solid var(--border-color)}.modal-header h3{font-size:clamp(1.3rem,3vw,1.8rem);color:var(--primary-color)}.close-btn{background:none;border:none;font-size:2em;color:#999;cursor:pointer;transition:color .3s;line-height:1}.close-btn:hover{color:var(--danger-color)}.welcome-modal .modal-content{max-width:500px;text-align:center}.welcome-icon{font-size:5em;margin-bottom:20px}.welcome-modal h2{color:var(--primary-color);margin-bottom:15px;font-size:clamp(1.5rem,4vw,2rem)}.welcome-modal p{color:var(--text-light);margin-bottom:30px;line-height:1.6;font-size:clamp(.95rem,2vw,1.1rem)}.mode-buttons{display:flex;gap:15px;flex-direction:column}.mode-btn{padding:20px;border:3px solid var(--border-color);border-radius:12px;background:#fff;cursor:pointer;transition:.3s;text-align:left}.mode-btn:hover{border-color:var(--primary-color);transform:translateY(-3px);box-shadow:0 6px 20px rgba(74,144,226,.3)}.mode-btn-icon{font-size:2em;margin-bottom:10px}.mode-btn-title{font-size:1.3em;font-weight:700;color:var(--text-color);margin-bottom:5px}.mode-btn-desc{color:var(--text-light);font-size:.95em;line-height:1.5}.form-group{margin-bottom:20px}.form-group label{display:block;margin-bottom:8px;font-weight:600;color:var(--text-color);font-size:clamp(.85rem,2vw,.95rem)}.form-group input,.form-group textarea,.form-group select{width:100%;padding:12px 15px;border:2px solid var(--border-color);border-radius:8px;font-size:clamp(.9rem,2vw,1rem);transition:.3s;font-family:inherit}.form-group input:focus,.form-group textarea:focus,.form-group select:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(74,144,226,.1)}.form-group textarea{resize:vertical;min-height:80px}.form-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}.form-group-with-button{display:flex;gap:10px;align-items:flex-end}.form-group-with-button .form-group{flex:1;margin-bottom:0}.btn{padding:12px 25px;border:none;border-radius:8px;font-size:clamp(.9rem,2vw,1rem);font-weight:600;cursor:pointer;transition:.3s;text-transform:uppercase;letter-spacing:.5px}.btn-primary{background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:#fff}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(74,144,226,.4)}.btn-danger{background:var(--danger-color);color:#fff}.btn-danger:hover{background:#c0392b;transform:translateY(-2px);box-shadow:0 6px 20px rgba(231,76,60,.4)}.btn-secondary{background:#95a5a6;color:#fff}.btn-secondary:hover{background:#7f8c8d}.btn-success{background:var(--success-color);color:#fff}.btn-success:hover{background:#229954}.btn-full{width:100%}.btn-icon{padding:10px 15px;font-size:.9rem}.btn-small{padding:8px 15px;font-size:clamp(.8rem,1.8vw,.9rem)}.client-badge{display:inline-block;padding:4px 10px;border-radius:20px;font-size:.8em;font-weight:600;background:#6ba3e8;color:#fff;margin-right:8px}.task-filters{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap}.filter-btn{padding:10px 15px;background:var(--bg-light);border:2px solid var(--border-color);border-radius:8px;cursor:pointer;transition:.3s;font-weight:600;color:var(--text-light);font-size:clamp(.85rem,2vw,.95rem)}.filter-btn.active{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}.task-list{display:flex;flex-direction:column;gap:12px}.task-item{background:var(--bg-light);padding:15px;border-radius:12px;border-left:5px solid;transition:.3s;cursor:pointer}.task-item:hover{transform:translateX(5px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.task-item.urgency-low{border-left-color:var(--success-color)}.task-item.urgency-medium{border-left-color:var(--warning-color)}.task-item.urgency-high{border-left-color:#e67e22}.task-item.urgency-urgent{border-left-color:var(--danger-color)}.task-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px;flex-wrap:wrap;gap:10px}.task-title{font-size:clamp(1.1rem,2.5vw,1.3rem);font-weight:700;color:var(--text-color);flex:1;word-break:break-word}.task-urgency{padding:6px 12px;border-radius:6px;font-size:clamp(.75rem,1.5vw,.85rem);font-weight:700;text-transform:uppercase;color:#fff}.task-urgency.low{background:var(--success-color)}.task-urgency.medium{background:var(--warning-color)}.task-urgency.high{background:#e67e22}.task-urgency.urgent{background:var(--danger-color)}.task-description{color:var(--text-light);margin-bottom:12px;line-height:1.6;font-size:clamp(.9rem,2vw,1rem);word-break:break-word}.task-meta{display:flex;flex-wrap:wrap;gap:12px;font-size:clamp(.8rem,1.8vw,.9rem);color:#888;margin-bottom:12px}.task-meta-item{display:flex;align-items:center;gap:5px}.task-actions{display:flex;gap:8px;flex-wrap:wrap}.empty-state{text-align:center;padding:40px 20px;color:#999}.empty-state-icon{font-size:clamp(3rem,8vw,4rem);margin-bottom:15px}.empty-state h3{font-size:clamp(1.2rem,3vw,1.5rem);margin-bottom:10px;color:var(--text-light)}.info-box{border-radius:12px;padding:15px;margin-bottom:15px;border:2px solid}.info-box.info{background:#d1ecf1;border-color:#bee5eb;color:#0c5460}.info-box.warning{background:#fff3cd;border-color:#ffc107;color:#856404}.info-box.success{background:#d4edda;border-color:#c3e6cb;color:#155724}.info-box h4{margin-bottom:10px;font-size:clamp(1rem,2.5vw,1.1rem)}.info-box p,.info-box ul{line-height:1.6;margin-bottom:8px;font-size:clamp(.85rem,2vw,.95rem)}.info-box ul{margin-left:20px;line-height:1.8}.client-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:15px;margin-bottom:20px}.client-card{background:var(--bg-light);padding:20px;border-radius:12px;border:2px solid var(--border-color);transition:.3s;cursor:pointer}.client-card:hover{border-color:var(--primary-color);transform:translateY(-3px);box-shadow:0 4px 12px rgba(74,144,226,.3)}.client-name{font-size:1.2em;font-weight:700;color:var(--text-color)}.client-info{color:var(--text-light);font-size:.9em;margin-bottom:5px}.client-task-count{display:inline-block;margin-top:10px;padding:5px 10px;background:var(--primary-color);color:#fff;border-radius:20px;font-size:.85em;font-weight:600}.settings-panel{max-width:800px}.settings-section{margin-bottom:30px}.settings-section h3{color:var(--primary-color);margin-bottom:15px;font-size:clamp(1.2rem,3vw,1.4rem);display:flex;align-items:center;gap:10px}.avatar-selector{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}.avatar-option{width:60px;height:60px;border-radius:50%;background:var(--bg-light);display:flex;align-items:center;justify-content:center;font-size:2em;cursor:pointer;border:3px solid var(--border-color);transition:.3s}.avatar-option:hover{transform:scale(1.1)}.avatar-option.active{border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(74,144,226,.2)}.color-picker-group{display:flex;align-items:center;gap:10px}.color-picker-group input[type=color]{width:60px;height:45px;border:2px solid var(--border-color);border-radius:8px;cursor:pointer}.color-preview{flex:1;padding:12px;border:2px solid var(--border-color);border-radius:8px;text-align:center;font-weight:600}.theme-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin-top:10px}.theme-option{padding:15px;border:3px solid var(--border-color);border-radius:12px;cursor:pointer;transition:.3s;text-align:center;font-weight:600}.theme-option:hover{transform:translateY(-3px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.theme-option.active{border-color:var(--primary-color);background:var(--primary-color);color:#fff}@media (max-width:768px){body{padding:5px}.container{border-radius:15px}header{padding:15px}.tab-content{padding:15px}.calendar-grid{gap:5px}.calendar-day{padding:5px 3px;min-height:50px}.modal-content{padding:20px;margin:10px}.form-row{grid-template-columns:1fr}.task-preview{display:none!important}}@media (max-width:480px){.calendar-day-header{padding:8px 3px;font-size:.7rem}.day-number{font-size:.9rem}.day-task-count{font-size:.6rem}.task-actions{width:100%}.task-actions .btn-small{flex:1}.theme-options{grid-template-columns:1fr 1fr}.client-list{grid-template-columns:1fr}}@media (min-width:768px) and (max-width:1024px){.calendar-grid{gap:10px}.calendar-day{min-height:70px}.tab-content{padding:20px}}@media (min-width:1400px){.tab-content{padding:30px}}

        
        /* Toast Notification */
        .toast{position:fixed;bottom:20px;right:20px;background:#333;color:#fff;padding:16px 24px;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.3);z-index:10000;opacity:0;transform:translateY(100px);transition:all 0.3s ease;max-width:90%;font-size:clamp(0.9rem,2vw,1rem);font-weight:500}
        .toast.show{opacity:1;transform:translateY(0)}
        .toast.warning{background:#f39c12}
        .toast.error{background:#e74c3c}
        .toast.success{background:#27ae60}
        
        @media (max-width:768px){
            .toast{bottom:10px;right:10px;left:10px;max-width:none}
        }

        #codeModal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);z-index:99999;display:flex;align-items:center;justify-content:center}
        .code-box{background:#fff;padding:50px;border-radius:20px;max-width:500px;width:90%;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.5);animation:slideUp 0.4s}
        .code-icon{font-size:5em;margin-bottom:20px}
        .code-title{font-size:clamp(1.8rem,4vw,2.3rem);color:var(--primary-color);margin-bottom:15px;font-weight:700}
        .code-subtitle{color:#666;margin-bottom:30px;line-height:1.6}
        .code-input{width:100%;padding:18px;border:3px solid #ddd;border-radius:12px;font-size:1.4em;text-align:center;letter-spacing:0.15em;text-transform:uppercase;font-weight:700;margin-bottom:10px;font-family:'Courier New',monospace;transition:0.3s}
        .code-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 4px rgba(74,144,226,0.1)}
        .code-error{color:var(--danger-color);margin-bottom:15px;font-weight:600;min-height:24px;font-size:0.95em}
        .code-btn{width:100%;padding:18px;background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:#fff;border:none;border-radius:12px;font-size:1.15em;font-weight:700;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:0.3s}
        .code-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px rgba(74,144,226,0.4)}
        .code-btn:disabled{opacity:0.6;cursor:not-allowed}
        .hide-app{display:none!important}

    </style>
</head>
<body>
    <div id="codeModal">
        <div class="code-box">
            <div class="code-icon">üîê</div>
            <h2 class="code-title">Access Code Required</h2>
            <p class="code-subtitle">Enter your unique access code to continue</p>
            <input type="text" id="codeInput" class="code-input" placeholder="ENTER CODE" maxlength="20">
            <div id="codeError" class="code-error"></div>
            <button id="codeBtn" class="code-btn">VERIFY & CONTINUE</button>
        </div>
    </div>


    <div class="container hide-app">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <h1>üìÖ Virtual Assistant Scheduler</h1>
                    <p>Manage clients and tasks efficiently</p>
                    <div id="liveClock" style="font-size:1.2em;font-weight:600;margin-top:8px;opacity:0.95"></div>
                </div>
                <div class="header-right">
                    <div class="profile-section" onclick="openProfileModal()">
                        <div class="profile-avatar" id="headerAvatar">üë§</div>
                        <div class="profile-name" id="headerName">Guest User</div>
                    </div>
                    <button class="settings-btn" onclick="openSettingsModal()">‚öôÔ∏è</button>
                </div>
            </div>
        </header>

        <div class="tabs">
            <button class="tab-btn active" data-tab="calendar">üìÖ Calendar</button>
            <button class="tab-btn" data-tab="tasks">üìã Tasks</button>
            <button class="tab-btn" data-tab="clients">üë• Clients</button>
            <button class="tab-btn" data-tab="shortcuts">üîó Export</button>
            <button class="tab-btn" data-tab="profile">üë§ Profile</button>
            <button class="tab-btn" data-tab="settings">‚öôÔ∏è Settings</button>
        </div>

        <!-- Calendar Tab -->
        <div id="calendar" class="tab-content active">
            <div id="notificationBanner" class="info-box info" style="display:none">
                <p>üîî <strong>Enable notifications to receive reminders!</strong></p>
                <button class="btn btn-primary" onclick="requestNotificationPermission()">Enable</button>
            </div>

            <div class="info-box warning">
                <h4>üì± Add to Home Screen</h4>
                <p><strong>For best experience on mobile:</strong></p>
                <ul>
                    <li><strong>iOS:</strong> Share ‚Üí Add to Home Screen</li>
                    <li><strong>Android:</strong> Menu ‚Üí Add to Home screen</li>
                </ul>
            </div>

            <div class="calendar-controls">
                <h2 id="currentMonth"></h2>
                <div class="calendar-nav">
                    <button class="nav-btn" onclick="changeMonth(-1)">‚Üê Prev</button>
                    <button class="nav-btn" onclick="changeMonth(0)">Today</button>
                    <button class="nav-btn" onclick="changeMonth(1)">Next ‚Üí</button>
                </div>
            </div>

            <div class="calendar-grid" id="calendarGrid"></div>
        </div>

        <!-- Tasks Tab -->
        <div id="tasks" class="tab-content">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:15px">
                <h2 style="color:var(--primary-color)">All Tasks</h2>
                <button class="btn btn-primary" onclick="openAddTaskModal()">+ Add Task</button>
            </div>

            <div style="margin-bottom:20px">
                <label for="taskClientFilter" style="font-weight:600;margin-right:10px">Filter by Client:</label>
                <select id="taskClientFilter" onchange="filterTasksByClient()" style="padding:10px 15px;border:2px solid var(--border-color);border-radius:8px;min-width:200px">
                    <option value="all">All Clients</option>
                </select>
            </div>

            <div class="task-filters">
                <button class="filter-btn active" data-filter="all" onclick="filterTasks('all')">All</button>
                <button class="filter-btn" data-filter="upcoming" onclick="filterTasks('upcoming')">Upcoming</button>
                <button class="filter-btn" data-filter="urgent" onclick="filterTasks('urgent')">Urgent</button>
                <button class="filter-btn" data-filter="high" onclick="filterTasks('high')">High</button>
                <button class="filter-btn" data-filter="medium" onclick="filterTasks('medium')">Medium</button>
                <button class="filter-btn" data-filter="low" onclick="filterTasks('low')">Low</button>
            </div>

            <div id="allTasksList" class="task-list"></div>
        </div>

        <!-- Clients Tab -->
        <div id="clients" class="tab-content">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:15px">
                <h2 style="color:var(--primary-color)">Client Management</h2>
                <button class="btn btn-primary" onclick="openAddClientModal()">+ Add Client</button>
            </div>
            <div id="clientsList" class="client-list"></div>
        </div>

        <!-- Shortcuts Tab -->
        <div id="shortcuts" class="tab-content">
            <div class="settings-panel">
                <h2 style="color:var(--primary-color);margin-bottom:20px">üîó Export & Backup</h2>
                <div class="settings-section">
                    <h3>üì§ Export Data</h3>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:15px">
                        <button class="btn btn-success" onclick="exportTasks()">üì§ Export JSON</button>
                        <button class="btn btn-primary" onclick="exportTasksICS()">üìÖ Export Calendar (ICS)</button>
                    </div>
                    <div class="form-group">
                        <label>Import Tasks (JSON)</label>
                        <input type="file" id="importFile" accept=".json" style="margin-bottom:10px">
                        <button class="btn btn-primary btn-full" onclick="importTasks()">üì• Import</button>
                    </div>
                </div>
                <div class="info-box success">
                    <h4>‚úÖ Best for iOS/Android Reminders</h4>
                    <ol style="margin-left:20px;line-height:2">
                        <li>Click <strong>"Export Calendar (ICS)"</strong></li>
                        <li>Open the file on your phone</li>
                        <li>Tap <strong>"Add All"</strong></li>
                        <li>Get native notifications!</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Profile Tab -->
        <div id="profile" class="tab-content">
            <div class="settings-panel">
                <div class="settings-section">
                    <h3>üë§ User Profile</h3>
                    <div class="form-group">
                        <label for="profileName">Name</label>
                        <input type="text" id="profileName" placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="profileEmail">Email (optional)</label>
                        <input type="email" id="profileEmail" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label>Choose Your Avatar</label>
                        <div class="avatar-selector" id="avatarSelector"></div>
                    </div>
                    <button class="btn btn-primary btn-full" onclick="saveProfile()">Save Profile</button>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="settings-panel">
                <div class="settings-section">
                    <h3>üîç Filter by Client</h3>
                    <p style="color:var(--text-light);margin-bottom:15px">Choose which client's tasks to display on the calendar</p>
                    <select id="calendarClientFilter" onchange="filterCalendarByClient()" style="width:100%;padding:12px 15px;border:2px solid var(--border-color);border-radius:8px;font-size:1rem;background:#fff;cursor:pointer">
                        <option value="all">All Clients</option>
                    </select>
                </div>

                <div class="settings-section">
                    <button class="btn btn-primary btn-full" onclick="toggleThemeSelection()" style="display:flex;justify-content:space-between;align-items:center">
                        <span>üé® Theme Selection</span>
                        <span id="themeToggleIcon">‚ñº</span>
                    </button>
                    <div id="themeSelectionPanel" style="display:none;margin-top:15px">
                        <div class="theme-options" id="themeOptions"></div>
                    </div>
                </div>

                <div class="settings-section">
                    <button class="btn btn-primary btn-full" onclick="toggleCustomColors()" style="display:flex;justify-content:space-between;align-items:center">
                        <span>üé® Custom Colors</span>
                        <span id="colorsToggleIcon">‚ñº</span>
                    </button>
                    <div id="customColorsPanel" style="display:none;margin-top:15px">
                        <div class="form-group">
                            <label>Primary Color</label>
                            <div class="color-picker-group">
                                <input type="color" id="primaryColor" value="#4a90e2">
                                <div class="color-preview" id="primaryPreview" style="background:#4a90e2;color:#fff">Primary</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Background Gradient Start</label>
                            <div class="color-picker-group">
                                <input type="color" id="bgGradientStart" value="#667eea">
                                <div class="color-preview" id="bgStartPreview" style="background:#667eea;color:#fff">Start</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Background Gradient End</label>
                            <div class="color-picker-group">
                                <input type="color" id="bgGradientEnd" value="#764ba2">
                                <div class="color-preview" id="bgEndPreview" style="background:#764ba2;color:#fff">End</div>
                            </div>
                        </div>
                        <button class="btn btn-primary btn-full" onclick="applyCustomTheme()">Apply Custom Theme</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>üîÑ Reset</h3>
                    <button class="btn btn-secondary btn-full" onclick="resetToDefault()">Reset to Default</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModal" class="modal welcome-modal">
        <div class="modal-content">
            <div class="welcome-icon">üëã</div>
            <h2>Welcome to VA Scheduler!</h2>
            <p>Choose how you'd like to use this app:</p>
            <div class="mode-buttons">
                <div class="mode-btn" onclick="selectMode('guest')">
                    <div class="mode-btn-icon">üöÄ</div>
                    <div class="mode-btn-title">Guest Mode</div>
                    <div class="mode-btn-desc">Quick start with default settings</div>
                </div>
                <div class="mode-btn" onclick="selectMode('personal')">
                    <div class="mode-btn-icon">üë§</div>
                    <div class="mode-btn-title">Personal Mode</div>
                    <div class="mode-btn-desc">Set up your profile with your name and preferences</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Modal -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Task</h3>
                <button class="close-btn" onclick="closeTaskModal()">&times;</button>
            </div>
            <form id="taskForm" onsubmit="saveTask(event)">
                <input type="hidden" id="taskId">
                <div class="form-group-with-button">
                    <div class="form-group">
                        <label for="taskClient">Client *</label>
                        <select id="taskClient" required>
                            <option value="">Select a client</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-success btn-icon" onclick="openAddClientModal()">+ Client</button>
                </div>
                <div class="form-group">
                    <label for="taskTitle">Task Title *</label>
                    <input type="text" id="taskTitle" required placeholder="Enter task title">
                </div>
                <div class="form-group">
                    <label for="taskDescription">Description</label>
                    <textarea id="taskDescription" placeholder="Enter task description (optional)"></textarea>
                </div>
                <div class="form-group">
                    <label for="taskDate">Date *</label>
                    <input type="date" id="taskDate" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="taskStartTime">Start Time *</label>
                        <input type="time" id="taskStartTime" required>
                    </div>
                    <div class="form-group">
                        <label for="taskEndTime">End Time</label>
                        <input type="time" id="taskEndTime">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="taskUrgency">Urgency Level *</label>
                        <select id="taskUrgency" required>
                            <option value="low">Low (Green)</option>
                            <option value="medium" selected>Medium (Yellow)</option>
                            <option value="high">High (Orange)</option>
                            <option value="urgent">Urgent (Red)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskReminder">Reminder Before</label>
                        <select id="taskReminder">
                            <option value="0">No Reminder</option>
                            <option value="5">5 minutes</option>
                            <option value="15" selected>15 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 hour</option>
                            <option value="1440">1 day</option>
                        </select>
                    </div>
                </div>
                <div style="display:flex;gap:10px;margin-top:25px;flex-wrap:wrap">
                    <button type="submit" class="btn btn-primary" style="flex:1;min-width:120px">Save Task</button>
                    <button type="button" class="btn btn-secondary" style="flex:1;min-width:120px" onclick="closeTaskModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Client Modal -->
    <div id="clientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="clientModalTitle">Add New Client</h3>
                <button class="close-btn" onclick="closeClientModal()">&times;</button>
            </div>
            <form id="clientForm" onsubmit="saveClient(event)">
                <input type="hidden" id="clientId">
                <div class="form-group">
                    <label for="clientName">Client Name *</label>
                    <input type="text" id="clientName" required placeholder="Enter client name">
                </div>
                <div class="form-group">
                    <label for="clientEmail">Email</label>
                    <input type="email" id="clientEmail" placeholder="Enter client email (optional)">
                </div>
                <div class="form-group">
                    <label for="clientPhone">Phone</label>
                    <input type="tel" id="clientPhone" placeholder="Enter client phone (optional)">
                </div>
                <div class="form-group">
                    <label for="clientNotes">Notes</label>
                    <textarea id="clientNotes" placeholder="Enter any additional notes (optional)"></textarea>
                </div>
                <div style="display:flex;gap:10px;margin-top:25px;flex-wrap:wrap">
                    <button type="submit" class="btn btn-primary" style="flex:1;min-width:120px">Save Client</button>
                    <button type="button" class="btn btn-secondary" style="flex:1;min-width:120px" onclick="closeClientModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Date Action Choice Modal -->
    <div id="dateActionModal" class="modal">
        <div class="modal-content" style="max-width:500px">
            <div class="modal-header">
                <h3 id="dateActionTitle">Tasks for this Date</h3>
                <button class="close-btn" onclick="closeDateActionModal()">&times;</button>
            </div>
            <div id="dateActionTaskList" style="margin-bottom:20px"></div>
            <div style="display:flex;gap:10px;flex-wrap:wrap">
                <button class="btn btn-primary" style="flex:1;min-width:140px" onclick="viewDateTasks()">üìã View All Tasks</button>
                <button class="btn btn-success" style="flex:1;min-width:140px" onclick="addTaskForDate()">+ Add New Task</button>
            </div>
        </div>
    </div>

    <div id="toastNotification" class="toast"></div>

    <script>
// =============================================================================
// COMPLETE JAVASCRIPT CODE FOR VIRTUAL ASSISTANT SCHEDULER
// =============================================================================
// Instructions: Add this script section to the HTML file before </body>
// This includes all functionality for client management, task scheduling,
// calendar filtering, notifications, and more.
// =============================================================================


// Global Variables
let currentDate = new Date();
let selectedDate = null;
let tasks = [];
let clients = [];
let editingTaskId = null;
let editingClientId = null;
let currentFilter = 'all';
let currentClientFilter = 'all';
let scheduledNotifications = {};
let userProfile = {
    name: 'Guest User',
    email: '',
    avatar: 'üë§',
    mode: 'guest'
};
let currentTheme = 'default';

// Predefined Themes
const themes = {
    default: { name: 'Ocean Blue', primaryColor: '#4a90e2', primaryDark: '#357abd', bgGradientStart: '#667eea', bgGradientEnd: '#764ba2' },
    sunset: { name: 'Sunset', primaryColor: '#ff6b6b', primaryDark: '#ee5a6f', bgGradientStart: '#f093fb', bgGradientEnd: '#f5576c' },
    forest: { name: 'Forest', primaryColor: '#27ae60', primaryDark: '#229954', bgGradientStart: '#56ab2f', bgGradientEnd: '#a8e063' },
    lavender: { name: 'Lavender', primaryColor: '#9b59b6', primaryDark: '#8e44ad', bgGradientStart: '#a8c0ff', bgGradientEnd: '#3f2b96' },
    coral: { name: 'Coral', primaryColor: '#ff7979', primaryDark: '#eb4d4b', bgGradientStart: '#fa709a', bgGradientEnd: '#fee140' },
    midnight: { name: 'Midnight', primaryColor: '#3498db', primaryDark: '#2980b9', bgGradientStart: '#2c3e50', bgGradientEnd: '#3498db' }
};

const avatarOptions = ['üë§', 'üòä', 'üòé', 'ü§ì', 'üë®', 'üë©', 'üßë', 'üë®‚Äçüíº', 'üë©‚Äçüíº', 'üë®‚Äçüéì', 'üë©‚Äçüéì', 'ü¶∏', 'ü¶π', 'üßô', 'üßù', 'üßõ'];

// Initialize App
function init() {
    checkFirstTime();
    loadUserProfile();
    loadTheme();
    loadTasks();
    loadClients();
    renderCalendar();
    renderAllTasks();
    renderClients();
    setupTabs();
    checkNotificationPermission();
    scheduleAllNotifications();
    renderThemeOptions();
    renderAvatarOptions();
    setupColorPickers();
    updateProfileDisplay();
    updateClientSelectors();
    
    // Set default date for new task using local timezone
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    document.getElementById('taskDate').value = `${year}-${month}-${day}`;
}

// First Time User Flow
function checkFirstTime() {
    const hasVisited = localStorage.getItem('schedulerHasVisited');
    if (!hasVisited) {
        document.getElementById('welcomeModal').classList.add('active');
    }
}

function selectMode(mode) {
    localStorage.setItem('schedulerHasVisited', 'true');
    userProfile.mode = mode;
    localStorage.setItem('schedulerProfile', JSON.stringify(userProfile));
    document.getElementById('welcomeModal').classList.remove('active');
    
    if (mode === 'personal') {
        setTimeout(() => {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.querySelector('[data-tab="profile"]').classList.add('active');
            document.getElementById('profile').classList.add('active');
            alert('üëã Welcome! Please set up your profile to personalize your experience.');
        }, 300);
    }
}

// Client Management
function loadClients() {
    const stored = localStorage.getItem('schedulerClients');
    clients = stored ? JSON.parse(stored) : [];
}

function saveClients() {
    localStorage.setItem('schedulerClients', JSON.stringify(clients));
}

function openAddClientModal() {
    editingClientId = null;
    document.getElementById('clientModalTitle').textContent = 'Add New Client';
    document.getElementById('clientForm').reset();
    document.getElementById('clientModal').classList.add('active');
}

function editClient(clientId) {
    const client = clients.find(c => c.id === clientId);
    if (!client) return;
    
    editingClientId = clientId;
    document.getElementById('clientModalTitle').textContent = 'Edit Client';
    document.getElementById('clientId').value = clientId;
    document.getElementById('clientName').value = client.name;
    document.getElementById('clientEmail').value = client.email || '';
    document.getElementById('clientPhone').value = client.phone || '';
    document.getElementById('clientNotes').value = client.notes || '';
    document.getElementById('clientModal').classList.add('active');
}

function closeClientModal() {
    document.getElementById('clientModal').classList.remove('active');
    document.getElementById('clientForm').reset();
    editingClientId = null;
}

function saveClient(event) {
    event.preventDefault();
    
    const clientData = {
        id: editingClientId || generateId(),
        name: document.getElementById('clientName').value,
        email: document.getElementById('clientEmail').value,
        phone: document.getElementById('clientPhone').value,
        notes: document.getElementById('clientNotes').value,
        createdAt: editingClientId ? clients.find(c => c.id === editingClientId).createdAt : new Date().toISOString()
    };
    
    if (editingClientId) {
        const index = clients.findIndex(c => c.id === editingClientId);
        if (index !== -1) clients[index] = clientData;
    } else {
        clients.push(clientData);
    }
    
    saveClients();
    closeClientModal();
    renderClients();
    updateClientSelectors();
}

function deleteClient(clientId) {
    const client = clients.find(c => c.id === clientId);
    const clientTasks = tasks.filter(t => t.clientId === clientId);
    
    if (clientTasks.length > 0) {
        if (!confirm(`This client has ${clientTasks.length} task(s). Deleting the client will also delete all their tasks. Continue?`)) return;
        tasks = tasks.filter(t => t.clientId !== clientId);
        saveTasks();
    } else {
        if (!confirm(`Are you sure you want to delete ${client.name}?`)) return;
    }
    
    clients = clients.filter(c => c.id !== clientId);
    saveClients();
    renderClients();
    updateClientSelectors();
    renderCalendar();
    renderAllTasks();
}

function viewClientTasks(clientId) {
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    document.querySelector('[data-tab="tasks"]').classList.add('active');
    document.getElementById('tasks').classList.add('active');
    document.getElementById('taskClientFilter').value = clientId;
    currentClientFilter = clientId;
    renderAllTasks();
}

function renderClients() {
    const container = document.getElementById('clientsList');
    
    if (clients.length === 0) {
        container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üë•</div><h3>No clients yet</h3><p>Add your first client to get started!</p></div>';
        return;
    }
    
    const sortedClients = [...clients].sort((a, b) => a.name.localeCompare(b.name));
    
    container.innerHTML = sortedClients.map(client => {
        const clientTasks = tasks.filter(t => t.clientId === client.id);
        return `
            <div class="client-card">
                <div class="client-card-header"><div class="client-name">${escapeHtml(client.name)}</div></div>
                ${client.email ? `<div class="client-info">üìß ${escapeHtml(client.email)}</div>` : ''}
                ${client.phone ? `<div class="client-info">üì± ${escapeHtml(client.phone)}</div>` : ''}
                ${client.notes ? `<div class="client-info">üìù ${escapeHtml(client.notes)}</div>` : ''}
                <div class="client-task-count">${clientTasks.length} task${clientTasks.length !== 1 ? 's' : ''}</div>
                <div style="display: flex; gap: 8px; margin-top: 15px; flex-wrap: wrap;">
                    <button class="btn btn-primary btn-small" onclick="viewClientTasks('${client.id}')">View Tasks</button>
                    <button class="btn btn-secondary btn-small" onclick="editClient('${client.id}')">Edit</button>
                    <button class="btn btn-danger btn-small" onclick="deleteClient('${client.id}')">Delete</button>
                </div>
            </div>
        `;
    }).join('');
}

function updateClientSelectors() {
    const taskClientSelect = document.getElementById('taskClient');
    const calendarFilter = document.getElementById('calendarClientFilter');
    const taskFilter = document.getElementById('taskClientFilter');
    
    const currentTaskValue = taskClientSelect.value;
    const currentCalendarValue = calendarFilter.value;
    const currentTaskFilterValue = taskFilter.value;
    
    const sortedClients = [...clients].sort((a, b) => a.name.localeCompare(b.name));
    
    taskClientSelect.innerHTML = '<option value="">Select a client</option>' +
        sortedClients.map(client => `<option value="${client.id}">${escapeHtml(client.name)}</option>`).join('');
    
    if (currentTaskValue) taskClientSelect.value = currentTaskValue;
    
    const filterOptions = '<option value="all">All Clients</option>' +
        sortedClients.map(client => `<option value="${client.id}">${escapeHtml(client.name)}</option>`).join('');
    
    calendarFilter.innerHTML = filterOptions;
    taskFilter.innerHTML = filterOptions;
    
    if (currentCalendarValue) calendarFilter.value = currentCalendarValue;
    if (currentTaskFilterValue) taskFilter.value = currentTaskFilterValue;
}

function filterCalendarByClient() {
    currentClientFilter = document.getElementById('calendarClientFilter').value;
    renderCalendar();
}

function filterTasksByClient() {
    currentClientFilter = document.getElementById('taskClientFilter').value;
    renderAllTasks();
}

// Profile Management
function loadUserProfile() {
    const stored = localStorage.getItem('schedulerProfile');
    if (stored) userProfile = JSON.parse(stored);
}

function saveProfile() {
    const name = document.getElementById('profileName').value.trim() || 'Guest User';
    const email = document.getElementById('profileEmail').value.trim();
    userProfile.name = name;
    userProfile.email = email;
    userProfile.mode = 'personal';
    localStorage.setItem('schedulerProfile', JSON.stringify(userProfile));
    updateProfileDisplay();
    alert('Profile saved successfully! ‚úÖ');
}

function updateProfileDisplay() {
    document.getElementById('headerName').textContent = userProfile.name;
    document.getElementById('headerAvatar').textContent = userProfile.avatar;
    document.getElementById('profileName').value = userProfile.name;
    document.getElementById('profileEmail').value = userProfile.email || '';
    document.querySelectorAll('.avatar-option').forEach(option => {
        option.classList.toggle('active', option.textContent === userProfile.avatar);
    });
}

function renderAvatarOptions() {
    const container = document.getElementById('avatarSelector');
    container.innerHTML = avatarOptions.map(avatar => 
        `<div class="avatar-option ${avatar === userProfile.avatar ? 'active' : ''}" onclick="selectAvatar('${avatar}')">${avatar}</div>`
    ).join('');
}

function selectAvatar(avatar) {
    userProfile.avatar = avatar;
    document.querySelectorAll('.avatar-option').forEach(option => {
        option.classList.toggle('active', option.textContent === avatar);
    });
    updateProfileDisplay();
}

function openProfileModal() {
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    document.querySelector('[data-tab="profile"]').classList.add('active');
    document.getElementById('profile').classList.add('active');
}

function openSettingsModal() {
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    document.querySelector('[data-tab="settings"]').classList.add('active');
    document.getElementById('settings').classList.add('active');
}

// Theme Management (functions: loadTheme, renderThemeOptions, selectTheme, applyTheme, setupColorPickers, updateColorPreviews, applyCustomTheme, adjustColor, resetToDefault)
function loadTheme() {
    const stored = localStorage.getItem('schedulerTheme');
    if (stored) {
        const themeData = JSON.parse(stored);
        currentTheme = themeData.name || 'default';
        applyTheme(themeData);
    }
}

function renderThemeOptions() {
    const container = document.getElementById('themeOptions');
    container.innerHTML = Object.entries(themes).map(([key, theme]) => {
        const isActive = currentTheme === key;
        return `<div class="theme-option ${isActive ? 'active' : ''}" onclick="selectTheme('${key}')" style="background: linear-gradient(135deg, ${theme.bgGradientStart} 0%, ${theme.bgGradientEnd} 100%); color: white;">${theme.name}</div>`;
    }).join('');
}

function selectTheme(themeKey) {
    currentTheme = themeKey;
    const theme = themes[themeKey];
    applyTheme(theme);
    localStorage.setItem('schedulerTheme', JSON.stringify({ name: themeKey, ...theme }));
    renderThemeOptions();
}

function applyTheme(theme) {
    document.documentElement.style.setProperty('--primary-color', theme.primaryColor);
    document.documentElement.style.setProperty('--primary-dark', theme.primaryDark);
    document.documentElement.style.setProperty('--background-gradient-start', theme.bgGradientStart);
    document.documentElement.style.setProperty('--background-gradient-end', theme.bgGradientEnd);
    document.getElementById('primaryColor').value = theme.primaryColor;
    document.getElementById('bgGradientStart').value = theme.bgGradientStart;
    document.getElementById('bgGradientEnd').value = theme.bgGradientEnd;
    updateColorPreviews();
}

function setupColorPickers() {
    document.getElementById('primaryColor').addEventListener('input', updateColorPreviews);
    document.getElementById('bgGradientStart').addEventListener('input', updateColorPreviews);
    document.getElementById('bgGradientEnd').addEventListener('input', updateColorPreviews);
}

function updateColorPreviews() {
    document.getElementById('primaryPreview').style.background = document.getElementById('primaryColor').value;
    document.getElementById('bgStartPreview').style.background = document.getElementById('bgGradientStart').value;
    document.getElementById('bgEndPreview').style.background = document.getElementById('bgGradientEnd').value;
}

function applyCustomTheme() {
    const customTheme = {
        name: 'custom',
        primaryColor: document.getElementById('primaryColor').value,
        primaryDark: adjustColor(document.getElementById('primaryColor').value, -20),
        bgGradientStart: document.getElementById('bgGradientStart').value,
        bgGradientEnd: document.getElementById('bgGradientEnd').value
    };
    currentTheme = 'custom';
    applyTheme(customTheme);
    localStorage.setItem('schedulerTheme', JSON.stringify(customTheme));
    renderThemeOptions();
    alert('Custom theme applied! üé®');
}

function adjustColor(color, percent) {
    const num = parseInt(color.replace('#', ''), 16);
    const amt = Math.round(2.55 * percent);
    const R = (num >> 16) + amt;
    const G = (num >> 8 & 0x00FF) + amt;
    const B = (num & 0x0000FF) + amt;
    return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
}

function resetToDefault() {
    if (confirm('Are you sure you want to reset to the default theme?')) {
        currentTheme = 'default';
        selectTheme('default');
        alert('Theme reset to default! üîÑ');
    }
}

// Tab Navigation
function setupTabs() {
    const tabBtns = document.querySelectorAll('.tab-btn');
    tabBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            tabBtns.forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            btn.classList.add('active');
            const tabId = btn.dataset.tab;
            document.getElementById(tabId).classList.add('active');
            if (tabId === 'tasks') renderAllTasks();
            else if (tabId === 'calendar') renderCalendar();
            else if (tabId === 'clients') renderClients();
            else if (tabId === 'profile') updateProfileDisplay();
            else if (tabId === 'settings') renderThemeOptions();
        });
    });
}

// LocalStorage Functions
function loadTasks() {
    const stored = localStorage.getItem('schedulerTasks');
    tasks = stored ? JSON.parse(stored) : [];
}

function saveTasks() {
    localStorage.setItem('schedulerTasks', JSON.stringify(tasks));
}

// Calendar Rendering with Task Preview Tooltips
function renderCalendar() {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    document.getElementById('currentMonth').textContent = `${monthNames[month]} ${year}`;
    
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startingDayOfWeek = firstDay.getDay();
    const prevMonthLastDay = new Date(year, month, 0).getDate();
    
    let html = '';
    const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    dayHeaders.forEach(day => { html += `<div class="calendar-day-header">${day}</div>`; });
    
    for (let i = startingDayOfWeek - 1; i >= 0; i--) {
        const day = prevMonthLastDay - i;
        html += `<div class="calendar-day other-month"><div class="day-number">${day}</div></div>`;
    }
    
    const today = new Date();
    for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(year, month, day);
        const dateStr = formatDate(date);
        const isToday = date.toDateString() === today.toDateString();
        let dayTasks = getTasksForDate(dateStr);
        
        if (currentClientFilter !== 'all') {
            dayTasks = dayTasks.filter(t => t.clientId === currentClientFilter);
        }
        
        const hasTasks = dayTasks.length > 0;
        let classes = 'calendar-day';
        if (isToday) classes += ' today';
        if (hasTasks) classes += ' has-tasks';
        
        let taskPreview = '';
        if (hasTasks) {
            if (dayTasks.length === 1) {
                const task = dayTasks[0];
                const client = clients.find(c => c.id === task.clientId);
                const clientName = client ? client.name : 'Unknown Client';
                taskPreview = `<div class="task-preview">1 task - ${escapeHtml(clientName)}</div>`;
            } else if (dayTasks.length <= 3) {
                taskPreview = '<div class="task-preview">';
                dayTasks.forEach(task => {
                    const client = clients.find(c => c.id === task.clientId);
                    taskPreview += `<div class="task-preview-item">${formatTime(task.startTime)} - ${escapeHtml(task.title)}${client ? ' (' + escapeHtml(client.name) + ')' : ''}</div>`;
                });
                taskPreview += '</div>';
            } else {
                taskPreview = `<div class="task-preview">${dayTasks.length} tasks scheduled</div>`;
            }
        }
        
        html += `<div class="${classes}" onclick="selectDate('${dateStr}')">
            <div class="day-number">${day}</div>
            ${hasTasks ? `<div class="day-task-count">${dayTasks.length} task${dayTasks.length > 1 ? 's' : ''}</div>` : ''}
            ${taskPreview}
        </div>`;
    }
    
    const remainingDays = 42 - (startingDayOfWeek + daysInMonth);
    for (let day = 1; day <= remainingDays; day++) {
        html += `<div class="calendar-day other-month"><div class="day-number">${day}</div></div>`;
    }
    
    document.getElementById('calendarGrid').innerHTML = html;
}

function changeMonth(direction) {
    if (direction === 0) currentDate = new Date();
    else currentDate.setMonth(currentDate.getMonth() + direction);
    renderCalendar();
}

function selectDate(dateStr) {
    selectedDate = dateStr;
    const date = new Date(dateStr + 'T00:00:00');
    document.getElementById('taskDate').value = dateStr;
    
    // Get tasks for this date
    let dayTasks = getTasksForDate(dateStr);
    if (currentClientFilter !== 'all') {
        dayTasks = dayTasks.filter(t => t.clientId === currentClientFilter);
    }
    
    // If no tasks, open add task modal directly
    if (dayTasks.length === 0) {
        openAddTaskModal();
    } else {
        // If there are tasks, show choice modal
        const formatted = date.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        document.getElementById('dateActionTitle').textContent = `${formatted}`;
        
        // Show task list in the modal
        const taskListHtml = dayTasks.map(task => {
            const client = clients.find(c => c.id === task.clientId);
            const clientName = client ? client.name : 'Unknown Client';
            return `<div style="padding:10px;background:var(--bg-light);border-radius:8px;margin-bottom:8px;border-left:4px solid var(--primary-color)">
                <div style="font-weight:700;margin-bottom:5px">${escapeHtml(task.title)}</div>
                <div style="font-size:0.9em;color:var(--text-light)">üïê ${formatTime(task.startTime)} ‚Ä¢ üë§ ${escapeHtml(clientName)}</div>
            </div>`;
        }).join('');
        
        document.getElementById('dateActionTaskList').innerHTML = `
            <div style="margin-bottom:15px">
                <h4 style="color:var(--primary-color);margin-bottom:10px">${dayTasks.length} task${dayTasks.length > 1 ? 's' : ''} scheduled:</h4>
                ${taskListHtml}
            </div>
        `;
        
        document.getElementById('dateActionModal').classList.add('active');
    }
}

// Task Management
function getTasksForDate(dateStr) {
    return tasks.filter(task => task.date === dateStr);
}

function getUrgencyValue(urgency) {
    const values = { urgent: 4, high: 3, medium: 2, low: 1 };
    return values[urgency] || 0;
}

function renderTaskItem(task) {
    const client = clients.find(c => c.id === task.clientId);
    const clientName = client ? client.name : 'Unknown Client';
    const endTime = task.endTime ? ` - ${formatTime(task.endTime)}` : '';
    const reminderText = task.reminder > 0 ? `üîî ${task.reminder >= 1440 ? task.reminder / 1440 + ' day' : task.reminder + ' min'} before` : '';
    
    return `
        <div class="task-item urgency-${task.urgency}">
            <div class="task-header">
                <div class="task-title">
                    <span class="client-badge">${escapeHtml(clientName)}</span>
                    ${escapeHtml(task.title)}
                </div>
                <div class="task-urgency ${task.urgency}">${task.urgency}</div>
            </div>
            ${task.description ? `<div class="task-description">${escapeHtml(task.description)}</div>` : ''}
            <div class="task-meta">
                <div class="task-meta-item">üìÖ ${formatDateDisplay(task.date)}</div>
                <div class="task-meta-item">üïê ${formatTime(task.startTime)}${endTime}</div>
                ${reminderText ? `<div class="task-meta-item">${reminderText}</div>` : ''}
            </div>
            <div class="task-actions">
                <button class="btn btn-primary btn-small" onclick="editTask('${task.id}')">Edit</button>
                <button class="btn btn-danger btn-small" onclick="deleteTask('${task.id}')">Delete</button>
            </div>
        </div>
    `;
}

function renderAllTasks() {
    const container = document.getElementById('allTasksList');
    let filteredTasks = [...tasks];
    
    if (currentClientFilter !== 'all') {
        filteredTasks = filteredTasks.filter(task => task.clientId === currentClientFilter);
    }
    
    if (currentFilter === 'upcoming') {
        const today = new Date().toISOString().split('T')[0];
        filteredTasks = filteredTasks.filter(task => task.date >= today);
    } else if (currentFilter !== 'all') {
        filteredTasks = filteredTasks.filter(task => task.urgency === currentFilter);
    }
    
    if (filteredTasks.length === 0) {
        container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üìã</div><h3>No tasks found</h3><p>Create your first task to get started!</p></div>';
        return;
    }
    
    filteredTasks.sort((a, b) => {
        const dateCompare = a.date.localeCompare(b.date);
        if (dateCompare !== 0) return dateCompare;
        const urgencyCompare = getUrgencyValue(b.urgency) - getUrgencyValue(a.urgency);
        if (urgencyCompare !== 0) return urgencyCompare;
        return a.startTime.localeCompare(b.startTime);
    });
    
    container.innerHTML = filteredTasks.map(task => renderTaskItem(task)).join('');
}

function filterTasks(filter) {
    currentFilter = filter;
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.filter === filter);
    });
    renderAllTasks();
}

function closeDateActionModal() {
    document.getElementById('dateActionModal').classList.remove('active');
}

function viewDateTasks() {
    closeDateActionModal();
    // Switch to tasks tab and filter by date
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    document.querySelector('[data-tab="tasks"]').classList.add('active');
    document.getElementById('tasks').classList.add('active');
    renderAllTasks();
}

function addTaskForDate() {
    closeDateActionModal();
    openAddTaskModal();
}

function toggleThemeSelection() {
    const panel = document.getElementById('themeSelectionPanel');
    const icon = document.getElementById('themeToggleIcon');
    if (panel.style.display === 'none') {
        panel.style.display = 'block';
        icon.textContent = '‚ñ≤';
    } else {
        panel.style.display = 'none';
        icon.textContent = '‚ñº';
    }
}

function toggleCustomColors() {
    const panel = document.getElementById('customColorsPanel');
    const icon = document.getElementById('colorsToggleIcon');
    if (panel.style.display === 'none') {
        panel.style.display = 'block';
        icon.textContent = '‚ñ≤';
    } else {
        panel.style.display = 'none';
        icon.textContent = '‚ñº';
    }
}

// Modal Functions
function openAddTaskModal() {
    if (clients.length === 0) {
        alert('Please add a client first before creating a task!');
        openAddClientModal();
        return;
    }
    
    editingTaskId = null;
    document.getElementById('modalTitle').textContent = 'Add New Task';
    document.getElementById('taskForm').reset();
    
    // Set date properly using local timezone
    if (selectedDate) {
        document.getElementById('taskDate').value = selectedDate;
    } else {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        document.getElementById('taskDate').value = `${year}-${month}-${day}`;
    }
    
    // Set current time (not +1 hour)
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    document.getElementById('taskStartTime').value = `${hours}:${minutes}`;
    
    document.getElementById('taskModal').classList.add('active');
}

function editTask(taskId) {
    const task = tasks.find(t => t.id === taskId);
    if (!task) return;
    
    editingTaskId = taskId;
    document.getElementById('modalTitle').textContent = 'Edit Task';
    document.getElementById('taskId').value = taskId;
    document.getElementById('taskClient').value = task.clientId;
    document.getElementById('taskTitle').value = task.title;
    document.getElementById('taskDescription').value = task.description || '';
    document.getElementById('taskDate').value = task.date;
    document.getElementById('taskStartTime').value = task.startTime;
    document.getElementById('taskEndTime').value = task.endTime || '';
    document.getElementById('taskUrgency').value = task.urgency;
    document.getElementById('taskReminder').value = task.reminder;
    document.getElementById('taskModal').classList.add('active');
}

function closeTaskModal() {
    document.getElementById('taskModal').classList.remove('active');
    document.getElementById('taskForm').reset();
    editingTaskId = null;
}

function saveTask(event) {
    event.preventDefault();
    
    const taskData = {
        id: editingTaskId || generateId(),
        clientId: document.getElementById('taskClient').value,
        title: document.getElementById('taskTitle').value,
        description: document.getElementById('taskDescription').value,
        date: document.getElementById('taskDate').value,
        startTime: document.getElementById('taskStartTime').value,
        endTime: document.getElementById('taskEndTime').value,
        urgency: document.getElementById('taskUrgency').value,
        reminder: parseInt(document.getElementById('taskReminder').value)
    };
    
    // Check if task time is within 10 minutes from now
    const taskDateTime = new Date(`${taskData.date}T${taskData.startTime}`);
    const now = new Date();
    const timeDiff = (taskDateTime - now) / 1000 / 60; // difference in minutes
    
    if (timeDiff < 10 && timeDiff > 0) {
        showToast('‚ö†Ô∏è Warning: Task is scheduled within 10 minutes! Consider adding more time.', 'warning');
    } else if (timeDiff <= 0) {
        showToast('‚ö†Ô∏è Warning: Task time has already passed!', 'error');
    }
    
    if (editingTaskId) {
        const index = tasks.findIndex(t => t.id === editingTaskId);
        if (index !== -1) {
            cancelNotification(editingTaskId);
            tasks[index] = taskData;
        }
    } else {
        tasks.push(taskData);
    }
    
    saveTasks();
    scheduleNotification(taskData);
    closeTaskModal();
    renderCalendar();
    renderAllTasks();
    renderClients();
    
    if (timeDiff >= 10 || timeDiff < 0) {
        showToast('‚úÖ Task saved successfully!', 'success');
    }
}

function deleteTask(taskId) {
    if (!confirm('Are you sure you want to delete this task?')) return;
    
    cancelNotification(taskId);
    tasks = tasks.filter(t => t.id !== taskId);
    saveTasks();
    renderCalendar();
    renderAllTasks();
    renderClients();
}

// Export/Import Functions
function exportTasks() {
    const exportData = { tasks: tasks, clients: clients };
    const dataStr = JSON.stringify(exportData, null, 2);
    const dataBlob = new Blob([dataStr], { type: 'application/json' });
    const url = URL.createObjectURL(dataBlob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `scheduler-backup-${formatDate(new Date())}.json`;
    link.click();
    URL.revokeObjectURL(url);
    alert('‚úÖ Tasks and clients exported successfully!');
}

function exportTasksICS() {
    let icsContent = 'BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Virtual Assistant Scheduler//EN\nCALSCALE:GREGORIAN\n';
    
    tasks.forEach(task => {
        const client = clients.find(c => c.id === task.clientId);
        const clientName = client ? client.name : 'Unknown Client';
        const startDateTime = new Date(`${task.date}T${task.startTime}`);
        const endDateTime = task.endTime ? new Date(`${task.date}T${task.endTime}`) : new Date(startDateTime.getTime() + 60 * 60 * 1000);
        const formatICSDate = (date) => date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
        
        let alarm = '';
        if (task.reminder > 0) {
            alarm = `BEGIN:VALARM\nTRIGGER:-PT${task.reminder}M\nACTION:DISPLAY\nDESCRIPTION:${task.title} - ${clientName}\nEND:VALARM\n`;
        }
        
        icsContent += `BEGIN:VEVENT\nUID:${task.id}@scheduler.app\nDTSTAMP:${formatICSDate(new Date())}\nDTSTART:${formatICSDate(startDateTime)}\nDTEND:${formatICSDate(endDateTime)}\nSUMMARY:${task.title} - ${clientName}\n`;
        if (task.description) icsContent += `DESCRIPTION:Client: ${clientName}\\n${task.description.replace(/\n/g, '\\n')}\n`;
        icsContent += `PRIORITY:${task.urgency === 'urgent' ? '1' : task.urgency === 'high' ? '3' : task.urgency === 'medium' ? '5' : '7'}\n${alarm}END:VEVENT\n`;
    });
    
    icsContent += 'END:VCALENDAR';
    const dataBlob = new Blob([icsContent], { type: 'text/calendar' });
    const url = URL.createObjectURL(dataBlob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `scheduler-calendar-${formatDate(new Date())}.ics`;
    link.click();
    URL.revokeObjectURL(url);
    alert('‚úÖ Calendar exported! Open the file on your phone to add events to your calendar.');
}

function importTasks() {
    const fileInput = document.getElementById('importFile');
    const file = fileInput.files[0];
    if (!file) { alert('Please select a file to import'); return; }
    
    const reader = new FileReader();
    reader.onload = (e) => {
        try {
            const importedData = JSON.parse(e.target.result);
            if (!importedData.tasks || !Array.isArray(importedData.tasks)) throw new Error('Invalid file format');
            
            if (importedData.clients && Array.isArray(importedData.clients)) {
                const existingClientIds = new Set(clients.map(c => c.id));
                const newClients = importedData.clients.filter(c => !existingClientIds.has(c.id));
                clients = [...clients, ...newClients];
                saveClients();
            }
            
            const existingTaskIds = new Set(tasks.map(t => t.id));
            const newTasks = importedData.tasks.filter(t => !existingTaskIds.has(t.id));
            tasks = [...tasks, ...newTasks];
            saveTasks();
            
            scheduleAllNotifications();
            renderCalendar();
            renderAllTasks();
            renderClients();
            updateClientSelectors();
            alert(`‚úÖ Imported ${newTasks.length} task(s) successfully!`);
            fileInput.value = '';
        } catch (error) {
            alert('‚ùå Error importing file: ' + error.message);
        }
    };
    reader.readAsText(file);
}

// Notification Functions
function checkNotificationPermission() {
    if (!('Notification' in window)) { console.log('Notifications not supported'); return; }
    if (Notification.permission === 'default') document.getElementById('notificationBanner').style.display = 'flex';
}

function requestNotificationPermission() {
    if (!('Notification' in window)) { alert('Notifications are not supported in this browser'); return; }
    
    Notification.requestPermission().then(permission => {
        if (permission === 'granted') {
            document.getElementById('notificationBanner').style.display = 'none';
            new Notification('Notifications Enabled! üéâ', { body: 'You will now receive reminders for your tasks.' });
            scheduleAllNotifications();
        } else {
            alert('Notification permission denied. You won\'t receive reminders.');
        }
    });
}

function scheduleNotification(task) {
    if (!('Notification' in window) || Notification.permission !== 'granted' || task.reminder === 0) return;
    
    const taskDateTime = new Date(`${task.date}T${task.startTime}`);
    const reminderTime = new Date(taskDateTime.getTime() - (task.reminder * 60 * 1000));
    const now = new Date();
    if (reminderTime <= now) return;
    
    const delay = reminderTime.getTime() - now.getTime();
    cancelNotification(task.id);
    
    const timeoutId = setTimeout(() => {
        showNotification(task);
        delete scheduledNotifications[task.id];
    }, delay);
    
    scheduledNotifications[task.id] = timeoutId;
}

function scheduleAllNotifications() {
    Object.values(scheduledNotifications).forEach(timeoutId => clearTimeout(timeoutId));
    scheduledNotifications = {};
    tasks.forEach(task => scheduleNotification(task));
}

function cancelNotification(taskId) {
    if (scheduledNotifications[taskId]) {
        clearTimeout(scheduledNotifications[taskId]);
        delete scheduledNotifications[taskId];
    }
}

function showNotification(task) {
    const client = clients.find(c => c.id === task.clientId);
    const clientName = client ? client.name : 'Unknown Client';
    const title = `üîî Reminder: ${task.title}`;
    const body = `Client: ${clientName}\n${task.description || 'Task starts at ' + formatTime(task.startTime)}`;
    
    if ('Notification' in window && Notification.permission === 'granted') {
        const notification = new Notification(title, { body: body, requireInteraction: true, tag: task.id });
        notification.onclick = () => { window.focus(); notification.close(); };
    } else {
        alert(`${title}\n\n${body}`);
    }
}

// Utility Functions
function generateId() { return Date.now().toString(36) + Math.random().toString(36).substr(2); }
function formatDate(date) { 
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
}
function formatDateDisplay(dateStr) {
    const date = new Date(dateStr + 'T00:00:00');
    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
}
function formatTime(timeStr) {
    if (!timeStr) return '';
    const [hours, minutes] = timeStr.split(':');
    const hour = parseInt(hours);
    const ampm = hour >= 12 ? 'PM' : 'AM';
    const displayHour = hour % 12 || 12;
    return `${displayHour}:${minutes} ${ampm}`;
}
function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

// Close modal when clicking outside
document.getElementById('taskModal').addEventListener('click', (e) => {
    if (e.target.id === 'taskModal') closeTaskModal();
});

document.getElementById('clientModal').addEventListener('click', (e) => {
    if (e.target.id === 'clientModal') closeClientModal();
});

document.getElementById('dateActionModal').addEventListener('click', (e) => {
    if (e.target.id === 'dateActionModal') closeDateActionModal();
});

// Initialize app when DOM is loaded
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
} else {
    init();
}



// Live Clock Function
function updateClock() {
    const now = new Date();
    const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
    };
    document.getElementById('liveClock').textContent = now.toLocaleString('en-US', options);
}

// Toast Notification Function
function showToast(message, type = 'warning') {
    const toast = document.getElementById('toastNotification');
    toast.textContent = message;
    toast.className = `toast ${type} show`;
    
    setTimeout(() => {
        toast.classList.remove('show');
    }, 3000);
}



// CODE VERIFICATION
const API_URL = 'https://script.google.com/macros/s/AKfycbwvB20Z7J8W5Igg1la-9Bq84u8XXCTP96Cnr7VjBnNn38mvgTXIaRO_E_ki1_-MOTit2A/exec';

window.addEventListener('DOMContentLoaded', function() {
    // Check if already verified
    if (localStorage.getItem('verified') === 'true') {
        document.getElementById('codeModal').style.display = 'none';
        document.querySelector('.container').classList.remove('hide-app');
    } else {
        document.getElementById('codeInput').focus();
    }
    
    // Enter key support
    document.getElementById('codeInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') verifyAccessCode();
    });
    
    // Button click
    document.getElementById('codeBtn').addEventListener('click', verifyAccessCode);
});

async function verifyAccessCode() {
    const input = document.getElementById('codeInput');
    const error = document.getElementById('codeError');
    const btn = document.getElementById('codeBtn');
    const code = input.value.trim().toUpperCase();
    
    error.textContent = '';
    
    if (!code) {
        error.textContent = 'Please enter a code';
        return;
    }
    
    btn.disabled = true;
    btn.textContent = 'VERIFYING...';
    
    try {
        const response = await fetch(API_URL, {
            method: 'POST',
            headers: {'Content-Type': 'text/plain'},
            body: JSON.stringify({action: 'verify', code: code}),
            redirect: 'follow'
        });
        
        const text = await response.text();
        const data = JSON.parse(text);
        
        if (data.success) {
            // Success!
            localStorage.setItem('verified', 'true');
            localStorage.setItem('code', code);
            btn.textContent = '‚úì SUCCESS!';
            btn.style.background = 'var(--success-color)';
            showToast(data.message, 'success');
            
            setTimeout(() => {
                document.getElementById('codeModal').style.display = 'none';
                document.querySelector('.container').classList.remove('hide-app');
            }, 1200);
        } else {
            // Error
            error.textContent = data.message;
            showToast(data.message, 'error');
            btn.disabled = false;
            btn.textContent = 'VERIFY & CONTINUE';
        }
        
    } catch (err) {
        error.textContent = 'Connection error. Check internet and try again.';
        showToast('‚ùå Connection error', 'error');
        btn.disabled = false;
        btn.textContent = 'VERIFY & CONTINUE';
    }
}

function logoutCode() {
    if (confirm('Logout? You will need a new access code.')) {
        localStorage.removeItem('verified');
        localStorage.removeItem('code');
        location.reload();
    }
}


// Start the clock
setInterval(updateClock, 1000);
updateClock();

    </script>
</body>
</html>
